- if current_cart.cart_items.count == 0
  %h1
    The cart is empty
- else
  .table-responsive
    %table.table.table-striped
      %thead
        %tr
          %th
            Name
          %th
            Image
          %th
            Vendor code
          %th
            Price
          %th
            Amount
          %th
            Actions
          %tbody
            - @cart_items.each do |item|
              %tr{id: "product_#{item.product.id}"}
                %td
                  = item.product.name
                %td
                  -if item.product.image.attached? && item.product.image.persisted?
                    = image_tag item.product.image, size: "100x100", class: "img-fluid"
                  -else
                    = image_tag 'placeholder.jpg', size: "100x100", class: "img-fluid"
                %td
                  = item.product.code
                %td
                  = item.total
                %td
                  = item.quantity
                %td
                  .d-flex
                    = bootstrap_form_with model: item do |f|
                      = f.hidden_field :product_id, value: item.product.id
                      = f.hidden_field :quantity,
                              value: item.quantity + 1
                      = f.submit "Increase product amount", class: 'btn btn-outline-primary me-3', id: "add_#{item.product.id}"
                    = link_to "Remove product", item, method: :delete, class: 'btn btn-outline-danger', id: "del_#{item.product.id}"

.row
  .col
    = link_to "Checkout", '#', class: 'btn btn-lg btn-outline-primary', id: "checkout"
  .col
    .mb-4.float-end
      %span.fw-bold
        Total price:
      = current_cart.subtotal
      $

