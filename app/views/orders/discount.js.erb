<% if current_cart.discount == 0 %>
  document.querySelector("#discount #confirm_promo div.mb-3 input#code").value = ""
  if (!document.querySelector("#discount #confirm_promo div.mb-3 input#code").classList.contains("is-invalid")) {
      const error = document.createElement('div')
      error.classList.add("invalid-feedback")
      error.innerHTML = "Sorry your promo code is incorrect or not valid anymore."
      document.querySelector("#discount #confirm_promo div.mb-3 input#code").classList.add("is-invalid")
      document.querySelector("#discount #confirm_promo div.mb-3").appendChild(
          error
      )
  }
<% else %>
  document.querySelector("#total_price").innerHTML = "<%= number_to_currency(current_cart.total) %>"
  document.querySelector("#discount_percent").innerHTML = "(- <%= current_cart.discount %> %)"
  document.querySelector("#discount_percent").hidden = false
  document.querySelector("#confirm_promo").hidden = true
  document.querySelector("#form_price").value = <%= current_cart.total %>
<% end %>