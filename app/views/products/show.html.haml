%h1
  = @product.name
%div
  %span.fw-lighter
    Vendor code:
  = @product.code
.row.mt-2
  .col-6
    -if @product.image.attached? && @product.image.persisted?
      = image_tag @product.image, class: "img-fluid card-img-top mb-4"
    -else
      = image_tag 'placeholder.jpg', class: "img-fluid card-img-top mh-100 mb-4"
  .col-6
    %h3
      = @product.price
      $
    - if check_if_admin?
      %button.btn.btn-outline-danger{"data-bs-target" => "#confirmPopup",
      "data-bs-toggle" => "modal", type: "button"}
        Delete Product
      = link_to 'Edit product', edit_product_path(@product), class: 'btn btn-outline-primary', data: {turbolinks: false}
    - else
      - if current_order.order_items.where(product_id: @product.id).empty?
        = bootstrap_form_with model: @order_item do |f|
          = f.hidden_field :product_id, value: @product.id
          = f.hidden_field :quantity, value: 1
          = f.submit "Add To Cart", class: 'btn btn-outline-primary btn-lg', id: "add_#{@product.id}"
      - else
        = bootstrap_form_with model: current_order.order_items.where(product_id: @product.id).first do |f|
          = f.hidden_field :product_id, value: @product.id
          = f.hidden_field :quantity,
                        value: current_order.order_items.where(product_id: @product.id).first.quantity + 1
          = f.submit "Add To Cart", class: 'btn btn-outline-primary btn-lg', id: "add_#{@product.id}"
  %div
    %h3
      Description
    -if @product.description.nil? || @product.description.empty?
      Empty
    -else
      = simple_format(@product.description)

= render 'modal', more_products: false